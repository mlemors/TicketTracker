<Window x:Class="TicketTracker.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Ticket Tracker" Height="600" Width="1000"
        MinHeight="500" MinWidth="800"
        Background="{DynamicResource BackgroundBrush}"
        WindowStyle="None"
        AllowsTransparency="True"
        ResizeMode="CanResizeWithGrip">

    <Border BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="40" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <!-- Custom Title Bar -->
            <Grid Grid.Row="0" Background="{DynamicResource BackgroundBrush}"
                  MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!-- Hamburger Menu -->
                <Button x:Name="HamburgerButton"
                        Grid.Column="0"
                        Width="40" Height="40"
                        Background="Transparent"
                        BorderThickness="0"
                        Margin="8,0,0,0"
                        Click="HamburgerButton_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="{DynamicResource NavigationHoverBrush}" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                    <TextBlock x:Name="HamburgerIcon"
                               Text="☰"
                               FontSize="16"
                               Foreground="{DynamicResource PrimaryTextBrush}"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center">
                        <TextBlock.RenderTransform>
                            <ScaleTransform x:Name="HamburgerScale" ScaleX="1" ScaleY="1" CenterX="8" CenterY="8" />
                        </TextBlock.RenderTransform>
                    </TextBlock>
                </Button>

                <!-- Title -->
                <TextBlock Grid.Column="1"
                           Text="Ticket Tracker"
                           FontSize="14" FontWeight="SemiBold"
                           Foreground="{DynamicResource PrimaryTextBrush}"
                           VerticalAlignment="Center"
                           Margin="15,0,0,0" />

                <!-- Window Controls -->
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button x:Name="MinimizeButton"
                            Content="−"
                            Width="46" Height="40"
                            FontSize="16" FontWeight="Bold"
                            Background="Transparent"
                            Foreground="{DynamicResource PrimaryTextBrush}"
                            BorderThickness="0"
                            Click="MinimizeButton_Click"
                            Style="{x:Null}">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="{DynamicResource NavigationHoverBrush}" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>

                    <Button x:Name="CloseButton"
                            Content="✕"
                            Width="46" Height="40"
                            FontSize="14" FontWeight="Bold"
                            Background="Transparent"
                            Foreground="{DynamicResource PrimaryTextBrush}"
                            BorderThickness="0"
                            Click="CloseButton_Click"
                            Style="{x:Null}">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#E81123" />
                                        <Setter Property="TextElement.Foreground" Value="White" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </StackPanel>
            </Grid>

            <!-- Main Content Area -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition x:Name="SidebarColumn" Width="250" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Expandable Sidebar -->
                <Border Grid.Column="0"
                        Background="{DynamicResource NavigationBackgroundBrush}"
                        BorderThickness="0,0,1,0"
                        BorderBrush="{DynamicResource BorderBrush}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!-- Tickets Section -->
                        <ScrollViewer Grid.Row="0"
                                      VerticalScrollBarVisibility="Auto"
                                      HorizontalScrollBarVisibility="Disabled"
                                      Margin="0,0,0,0">
                            <StackPanel x:Name="SidebarContent">
                                <!-- Tickets Header Area -->
                                <Grid x:Name="TicketsHeaderArea" Height="48" Margin="6,6,6,15"
                                      MouseLeftButtonUp="TicketsHeaderArea_Click"
                                      Background="Transparent">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="48" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="40" />
                                    </Grid.ColumnDefinitions>

                                    <!-- Ticket Icon (always visible) -->
                                    <TextBlock Grid.Column="0"
                                               Text="🎫"
                                               FontSize="20"
                                               HorizontalAlignment="Center"
                                               VerticalAlignment="Center"
                                               Foreground="{DynamicResource PrimaryTextBrush}" />

                                    <!-- Content Area (Text or Search Field) -->
                                    <Grid Grid.Column="1">
                                        <!-- Normal Header Text (default) -->
                                        <TextBlock x:Name="TicketsHeaderText"
                                                   Text="Tickets"
                                                   FontSize="16" FontWeight="SemiBold"
                                                   Foreground="{DynamicResource PrimaryTextBrush}"
                                                   VerticalAlignment="Center"
                                                   Margin="10,0,0,0" />

                                        <!-- Search Field (hidden by default) -->
                                        <Border x:Name="SearchFieldContainer"
                                                Visibility="Collapsed"
                                                Background="{DynamicResource SurfaceBrush}"
                                                BorderBrush="{DynamicResource BorderBrush}"
                                                BorderThickness="1"
                                                CornerRadius="4"
                                                Margin="10,8,8,8">
                                            <Grid>
                                                <!-- Watermark Text -->
                                                <TextBlock x:Name="SearchWatermark"
                                                           Text="Tickets suchen..."
                                                           FontSize="12"
                                                           Foreground="{DynamicResource SecondaryTextBrush}"
                                                           Opacity="0.7"
                                                           VerticalAlignment="Center"
                                                           Margin="8,0,4,0"
                                                           IsHitTestVisible="False" />

                                                <!-- Search TextBox -->
                                                <TextBox x:Name="SearchTextBox"
                                                         Background="Transparent"
                                                         BorderThickness="0"
                                                         FontSize="12"
                                                         Foreground="{DynamicResource PrimaryTextBrush}"
                                                         CaretBrush="{DynamicResource PrimaryTextBrush}"
                                                         VerticalAlignment="Center"
                                                         Padding="8,0,4,0"
                                                         TextChanged="SearchTextBox_TextChanged"
                                                         KeyDown="SearchTextBox_KeyDown"
                                                         LostFocus="SearchTextBox_LostFocus" />
                                            </Grid>
                                        </Border>
                                    </Grid>

                                    <!-- Action Button (always visible, changes function) -->
                                    <Button x:Name="ActionButton"
                                            Grid.Column="2"
                                            Width="32" Height="32"
                                            Background="Transparent"
                                            BorderThickness="0"
                                            Margin="0,0,8,0"
                                            Click="ActionButton_Click">
                                        <Button.Template>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}"
                                                        BorderBrush="{TemplateBinding BorderBrush}"
                                                        BorderThickness="{TemplateBinding BorderThickness}"
                                                        CornerRadius="4">
                                                    <ContentPresenter HorizontalAlignment="Center"
                                                                      VerticalAlignment="Center" />
                                                </Border>
                                                <ControlTemplate.Triggers>
                                                    <Trigger Property="IsMouseOver" Value="True">
                                                        <Setter Property="Background"
                                                                Value="{DynamicResource SurfaceBrush}" />
                                                        <Setter Property="BorderBrush"
                                                                Value="{DynamicResource BorderBrush}" />
                                                        <Setter Property="BorderThickness" Value="1" />
                                                    </Trigger>
                                                </ControlTemplate.Triggers>
                                            </ControlTemplate>
                                        </Button.Template>
                                        <TextBlock x:Name="ActionButtonIcon"
                                                   Text="+"
                                                   FontSize="20" FontWeight="Bold"
                                                   Foreground="{DynamicResource PrimaryTextBrush}"
                                                   HorizontalAlignment="Center"
                                                   VerticalAlignment="Center" />
                                    </Button>
                                </Grid>


                                <!-- Tickets List -->
                                <StackPanel x:Name="TicketsSection">
                                    <Grid>
                                        <!-- Animated Indicator Line -->
                                        <Canvas x:Name="IndicatorCanvas" ClipToBounds="True" Panel.ZIndex="10">
                                            <Border x:Name="AnimatedIndicator"
                                                    Background="{DynamicResource AccentBrush}"
                                                    CornerRadius="0,2,2,0"
                                                    Width="4"
                                                    Height="48"
                                                    Canvas.Left="0"
                                                    Visibility="Collapsed">
                                                <Border.RenderTransform>
                                                    <TranslateTransform x:Name="IndicatorTransform" Y="0" />
                                                </Border.RenderTransform>
                                            </Border>
                                        </Canvas>

                                        <!-- Expanded Timer List -->
                                        <ScrollViewer x:Name="SidebarScrollViewer"
                                                      MaxHeight="400"
                                                      VerticalScrollBarVisibility="Auto"
                                                      HorizontalScrollBarVisibility="Disabled">
                                            <ScrollViewer.Resources>
                                                <!-- Windows 11 Style Scrollbar -->
                                                <Style TargetType="ScrollBar">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="ScrollBar">
                                                                <Grid x:Name="ScrollBarGrid" Width="12"
                                                                      Background="Transparent">
                                                                    <Rectangle x:Name="TrackBackground"
                                                                               Width="4"
                                                                               HorizontalAlignment="Center"
                                                                               Fill="Transparent" />
                                                                    <Track x:Name="PART_Track"
                                                                           Grid.Row="0"
                                                                           IsDirectionReversed="True"
                                                                           Focusable="False">
                                                                        <Track.Thumb>
                                                                            <Thumb x:Name="PART_Thumb">
                                                                                <Thumb.Template>
                                                                                    <ControlTemplate TargetType="Thumb">
                                                                                        <Border x:Name="ThumbRect"
                                                                                            Width="4"
                                                                                            Background="{DynamicResource BorderBrush}"
                                                                                            CornerRadius="2"
                                                                                            Opacity="0.6">
                                                                                            <Border.RenderTransform>
                                                                                                <ScaleTransform
                                                                                                    x:Name="ThumbScale"
                                                                                                    ScaleX="1"
                                                                                                    ScaleY="1" />
                                                                                            </Border.RenderTransform>
                                                                                        </Border>
                                                                                        <ControlTemplate.Triggers>
                                                                                            <Trigger
                                                                                                Property="IsMouseOver"
                                                                                                Value="True">
                                                                                                <Setter
                                                                                                    TargetName="ThumbRect"
                                                                                                    Property="Width"
                                                                                                    Value="8" />
                                                                                                <Setter
                                                                                                    TargetName="ThumbRect"
                                                                                                    Property="Background"
                                                                                                    Value="{DynamicResource PrimaryTextBrush}" />
                                                                                                <Setter
                                                                                                    TargetName="ThumbRect"
                                                                                                    Property="Opacity"
                                                                                                    Value="0.8" />
                                                                                            </Trigger>
                                                                                            <Trigger
                                                                                                Property="IsDragging"
                                                                                                Value="True">
                                                                                                <Setter
                                                                                                    TargetName="ThumbRect"
                                                                                                    Property="Width"
                                                                                                    Value="8" />
                                                                                                <Setter
                                                                                                    TargetName="ThumbRect"
                                                                                                    Property="Background"
                                                                                                    Value="{DynamicResource AccentBrush}" />
                                                                                                <Setter
                                                                                                    TargetName="ThumbRect"
                                                                                                    Property="Opacity"
                                                                                                    Value="1" />
                                                                                            </Trigger>
                                                                                        </ControlTemplate.Triggers>
                                                                                    </ControlTemplate>
                                                                                </Thumb.Template>
                                                                            </Thumb>
                                                                        </Track.Thumb>
                                                                    </Track>
                                                                </Grid>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </ScrollViewer.Resources>
                                            <ItemsControl x:Name="SidebarTimerList">
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border Background="Transparent"
                                                                BorderThickness="0,0,0,1"
                                                                BorderBrush="{DynamicResource BorderBrush}"
                                                                Height="48"
                                                                Padding="0,8"
                                                                Margin="6,1,6,1">
                                                            <Border.Style>
                                                                <Style TargetType="Border">
                                                                    <Style.Triggers>
                                                                        <Trigger Property="IsMouseOver" Value="True">
                                                                            <Setter Property="Background"
                                                                                Value="{DynamicResource NavigationHoverBrush}" />
                                                                        </Trigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </Border.Style>
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="48" />
                                                                    <ColumnDefinition Width="*" />
                                                                    <ColumnDefinition Width="40" />
                                                                </Grid.ColumnDefinitions>

                                                                <!-- Timer Symbol (Left) -->
                                                                <TextBlock Grid.Column="0"
                                                                           Text="⏱️"
                                                                           FontSize="16"
                                                                           HorizontalAlignment="Center"
                                                                           VerticalAlignment="Center"
                                                                           Foreground="{DynamicResource PrimaryTextBrush}" />

                                                                <!-- Timer Name (Middle) -->
                                                                <TextBlock Grid.Column="1"
                                                                           Text="{Binding Name}"
                                                                           FontSize="12" FontWeight="SemiBold"
                                                                           Foreground="{DynamicResource PrimaryTextBrush}"
                                                                           TextTrimming="CharacterEllipsis"
                                                                           VerticalAlignment="Center"
                                                                           Margin="10,0,8,0" />

                                                                <!-- Play Symbol for running timers (Right) -->
                                                                <TextBlock Grid.Column="2"
                                                                           Text="▶️"
                                                                           FontSize="12"
                                                                           HorizontalAlignment="Center"
                                                                           VerticalAlignment="Center"
                                                                           Foreground="{DynamicResource AccentBrush}">
                                                                    <TextBlock.Style>
                                                                        <Style TargetType="TextBlock">
                                                                            <Setter Property="Visibility"
                                                                                Value="Collapsed" />
                                                                            <Style.Triggers>
                                                                                <DataTrigger
                                                                                    Binding="{Binding IsRunning}"
                                                                                    Value="True">
                                                                                    <Setter Property="Visibility"
                                                                                        Value="Visible" />
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </TextBlock.Style>
                                                                </TextBlock>
                                                            </Grid>
                                                        </Border>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </ScrollViewer>

                                        <!-- Collapsed Timer List (Icons only) -->
                                        <ScrollViewer x:Name="SidebarScrollViewerCollapsed"
                                                      MaxHeight="400"
                                                      VerticalScrollBarVisibility="Auto"
                                                      HorizontalScrollBarVisibility="Disabled"
                                                      Visibility="Collapsed">
                                            <ScrollViewer.Resources>
                                                <!-- Windows 11 Style Scrollbar -->
                                                <Style TargetType="ScrollBar">
                                                    <Setter Property="Template">
                                                        <Setter.Value>
                                                            <ControlTemplate TargetType="ScrollBar">
                                                                <Grid x:Name="ScrollBarGrid" Width="12"
                                                                      Background="Transparent">
                                                                    <Rectangle x:Name="TrackBackground"
                                                                               Width="4"
                                                                               HorizontalAlignment="Center"
                                                                               Fill="Transparent" />
                                                                    <Track x:Name="PART_Track"
                                                                           Grid.Row="0"
                                                                           IsDirectionReversed="True"
                                                                           Focusable="False">
                                                                        <Track.Thumb>
                                                                            <Thumb x:Name="PART_Thumb">
                                                                                <Thumb.Template>
                                                                                    <ControlTemplate TargetType="Thumb">
                                                                                        <Border x:Name="ThumbRect"
                                                                                            Width="4"
                                                                                            Background="{DynamicResource BorderBrush}"
                                                                                            CornerRadius="2"
                                                                                            Opacity="0.6">
                                                                                            <Border.RenderTransform>
                                                                                                <ScaleTransform
                                                                                                    x:Name="ThumbScale"
                                                                                                    ScaleX="1"
                                                                                                    ScaleY="1" />
                                                                                            </Border.RenderTransform>
                                                                                        </Border>
                                                                                        <ControlTemplate.Triggers>
                                                                                            <Trigger
                                                                                                Property="IsMouseOver"
                                                                                                Value="True">
                                                                                                <Setter
                                                                                                    TargetName="ThumbRect"
                                                                                                    Property="Width"
                                                                                                    Value="8" />
                                                                                                <Setter
                                                                                                    TargetName="ThumbRect"
                                                                                                    Property="Background"
                                                                                                    Value="{DynamicResource PrimaryTextBrush}" />
                                                                                                <Setter
                                                                                                    TargetName="ThumbRect"
                                                                                                    Property="Opacity"
                                                                                                    Value="0.8" />
                                                                                            </Trigger>
                                                                                            <Trigger
                                                                                                Property="IsDragging"
                                                                                                Value="True">
                                                                                                <Setter
                                                                                                    TargetName="ThumbRect"
                                                                                                    Property="Width"
                                                                                                    Value="8" />
                                                                                                <Setter
                                                                                                    TargetName="ThumbRect"
                                                                                                    Property="Background"
                                                                                                    Value="{DynamicResource AccentBrush}" />
                                                                                                <Setter
                                                                                                    TargetName="ThumbRect"
                                                                                                    Property="Opacity"
                                                                                                    Value="1" />
                                                                                            </Trigger>
                                                                                        </ControlTemplate.Triggers>
                                                                                    </ControlTemplate>
                                                                                </Thumb.Template>
                                                                            </Thumb>
                                                                        </Track.Thumb>
                                                                    </Track>
                                                                </Grid>
                                                            </ControlTemplate>
                                                        </Setter.Value>
                                                    </Setter>
                                                </Style>
                                            </ScrollViewer.Resources>
                                            <ItemsControl x:Name="SidebarTimerListCollapsed">
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border Background="Transparent"
                                                                BorderThickness="0,0,0,1"
                                                                BorderBrush="{DynamicResource BorderBrush}"
                                                                Height="48"
                                                                Padding="0,8"
                                                                Margin="6,1,6,1">
                                                            <Border.Style>
                                                                <Style TargetType="Border">
                                                                    <Style.Triggers>
                                                                        <Trigger Property="IsMouseOver" Value="True">
                                                                            <Setter Property="Background"
                                                                                Value="{DynamicResource NavigationHoverBrush}" />
                                                                        </Trigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </Border.Style>
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="48" />
                                                                    <ColumnDefinition Width="*" />
                                                                    <ColumnDefinition Width="40" />
                                                                </Grid.ColumnDefinitions>

                                                                <!-- Timer Symbol (Left) - Always visible -->
                                                                <TextBlock Grid.Column="0"
                                                                           Text="⏱️"
                                                                           FontSize="16"
                                                                           HorizontalAlignment="Center"
                                                                           VerticalAlignment="Center"
                                                                           Foreground="{DynamicResource PrimaryTextBrush}" />

                                                                <!-- Play Symbol overlay for running timers (on timer icon) -->
                                                                <TextBlock Grid.Column="0"
                                                                           Text="▶️"
                                                                           FontSize="8"
                                                                           HorizontalAlignment="Right"
                                                                           VerticalAlignment="Bottom"
                                                                           Margin="0,0,4,4"
                                                                           Foreground="{DynamicResource AccentBrush}">
                                                                    <TextBlock.Style>
                                                                        <Style TargetType="TextBlock">
                                                                            <Setter Property="Visibility"
                                                                                Value="Collapsed" />
                                                                            <Style.Triggers>
                                                                                <DataTrigger
                                                                                    Binding="{Binding IsRunning}"
                                                                                    Value="True">
                                                                                    <Setter Property="Visibility"
                                                                                        Value="Visible" />
                                                                                </DataTrigger>
                                                                            </Style.Triggers>
                                                                        </Style>
                                                                    </TextBlock.Style>
                                                                </TextBlock>
                                                            </Grid>
                                                        </Border>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </ScrollViewer>

                                        <!-- Add New Ticket Section -->
                                        <Grid x:Name="AddNewTicketSection" Margin="6,10,6,0">
                                            <!-- Inline Text Input (hidden by default) -->
                                            <Grid x:Name="InlineTextInput" Visibility="Collapsed">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="Auto" />
                                                </Grid.ColumnDefinitions>

                                                <TextBox x:Name="NewTimerNameTextBox"
                                                         Grid.Column="0"
                                                         Height="40"
                                                         Padding="8,0"
                                                         FontSize="12"
                                                         Background="{DynamicResource SurfaceBrush}"
                                                         Foreground="{DynamicResource PrimaryTextBrush}"
                                                         BorderBrush="{DynamicResource BorderBrush}"
                                                         BorderThickness="1"
                                                         KeyDown="NewTimerNameTextBox_KeyDown"
                                                         LostFocus="NewTimerNameTextBox_LostFocus" />

                                                <Button x:Name="ConfirmAddButton"
                                                        Grid.Column="1"
                                                        Width="30" Height="40"
                                                        Content="✓"
                                                        FontSize="12" FontWeight="Bold"
                                                        Background="{DynamicResource AccentBrush}"
                                                        Foreground="White"
                                                        BorderThickness="0"
                                                        Margin="2,0,0,0"
                                                        Click="ConfirmAddButton_Click">
                                                    <Button.Template>
                                                        <ControlTemplate TargetType="Button">
                                                            <Border Background="{TemplateBinding Background}"
                                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}">
                                                                <ContentPresenter HorizontalAlignment="Center"
                                                                    VerticalAlignment="Center" />
                                                            </Border>
                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter Property="Background"
                                                                            Value="{DynamicResource NavigationHoverBrush}" />
                                                                    <Setter Property="TextElement.Foreground"
                                                                            Value="{DynamicResource PrimaryTextBrush}" />
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>
                                                        </ControlTemplate>
                                                    </Button.Template>
                                                </Button>

                                            </Grid>
                                        </Grid>
                                    </Grid>
                                </StackPanel>
                            </StackPanel>
                        </ScrollViewer>

                        <!-- Settings Button -->
                        <Button x:Name="SettingsNavButton"
                                Grid.Row="1"
                                Height="48"
                                Margin="6,10,6,6"
                                Background="Transparent"
                                BorderThickness="0"
                                Click="SettingsNavButton_Click">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}">
                                        <ContentPresenter />
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background"
                                                    Value="{DynamicResource NavigationHoverBrush}" />
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="48" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0"
                                           Text="⚙️"
                                           FontSize="14"
                                           HorizontalAlignment="Center"
                                           VerticalAlignment="Center"
                                           Foreground="{DynamicResource PrimaryTextBrush}" />

                                <TextBlock x:Name="SettingsButtonText"
                                           Grid.Column="1"
                                           Text="Einstellungen"
                                           FontSize="12" FontWeight="SemiBold"
                                           Foreground="{DynamicResource PrimaryTextBrush}"
                                           VerticalAlignment="Center"
                                           Margin="10,0,0,0" />
                            </Grid>
                        </Button>
                    </Grid>
                </Border>

                <!-- Main Content -->
                <Grid Grid.Column="1">
                    <!-- Stopwatch View (always visible) -->
                    <ContentControl x:Name="StopwatchContent" />

                    <!-- Settings Overlay (full window) -->
                    <Border x:Name="SettingsOverlay"
                            Background="{DynamicResource BackgroundBrush}"
                            Visibility="Collapsed">
                        <ContentControl x:Name="SettingsContent" />
                    </Border>
                </Grid>
            </Grid>
        </Grid>
    </Border>
</Window>